---
title: 'ä¸€èµ·ä¾†è©¦è©¦çœ‹ NextJS çš„ "useSWR" Hook å§ï¼'
date: '2023-08-15'
excerpt: 'æœ€è¿‘çœ‹ React Developer Roadmap ç™¼ç¾ API Calls äººå®¶æ¨è–¦ SWR é€™å¥—å·¥å…·ï¼Œå¥½å¥‡åˆ°åº•æ˜¯ä»€éº¼åŠŸèƒ½å±…ç„¶èƒ½æ’¼å‹• Axios çš„åœ°ä½ï¼Ÿè©¦ç”¨äº†ä¸€ä¸‹ç™¼ç¾é‚„çœŸæœ‰é»æ„æ€ï¼'
tags: ['Next', 'Pages Router', 'SWR']
---

## ä»€éº¼æ˜¯ SWR

SWR is a React Hooks library for data fetching.

The name â€œSWRâ€ is derived from `stale-while-revalidate`, a cache invalidation strategy popularized by HTTP RFC 5861. SWR first returns the data from cache (stale), then sends the request (revalidate), and finally comes with the up-to-date data again.

With just one hook, you can significantly simplify the data fetching logic in your project.

## ä½¿ç”¨ SWR

You must now add a default "fetcher" when working with useSWR:

```jsx
import useSWR from 'swr'

useSWR(<request-url>, (url) => fetch(url).then(res => res.json()))
```

ç¯„ä¾‹ä¸€ï¼š

```jsx
const fetcher = (url) => fetch(url).then((r) => r.json());

function App() {
  const { data, error } = useSWR('/api/data', fetcher);
  // ...
}
```

ç¯„ä¾‹äºŒï¼š

```jsx
const { data, error } = useSWR(
  'https://nextjs-course-c81cc-default-rtdb.firebaseio.com/sales.json',
  (url) => fetch(url).then((res) => res.json()),
);
```

äº¦æˆ–æ˜¯ä½¿ç”¨å…¨å±€é…ç½®ï¼Œå°±èƒ½åœ¨ä½¿ç”¨æ™‚çœç•¥ä¸å¯«ç¬¬äºŒå€‹åƒæ•¸ `fetcher`ï¼š

[Global Configuration â€“ SWR](https://swr.vercel.app/docs/global-configuration)

> ğŸ‘‰ ä½¿ç”¨ SWR ç›¸è¼ƒæ–¼ä½¿ç”¨ fetch æˆ– Axios çš„å¥½è™•æ˜¯ï¼Œå®ƒå…§å»ºæä¾›äº†çš„ç·©å­˜å’Œé‡æ–°æ•´ç†ç­‰æ©Ÿåˆ¶ï¼Œä½¿å¾—è³‡æ–™çš„ç²å–å’Œæ›´æ–°è®Šå¾—æ›´åŠ ç°¡å–®ä¸”æœ‰æ•ˆç‡ã€‚æ­¤å¤–ï¼Œå®ƒé‚„å…·æœ‰è‡ªå‹•ä¸¦è¡Œè«‹æ±‚ã€éŒ¯èª¤é‡è©¦å’Œç‹€æ…‹ç®¡ç†ç­‰åŠŸèƒ½ï¼Œä½¿å¾—è³‡æ–™ç®¡ç†æ›´åŠ æ–¹ä¾¿ã€‚
